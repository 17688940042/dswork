if(typeof($jskey)!="object"){$jskey={};}$jskey.$=function(id){return document.getElementById(id);};$jskey.$byName=function(name){return document.getElementsByName(name);};$jskey.$byTagName=function(name){return document.getElementsByTagName(name);};$jskey.$dateFormat=function(d,f){var t={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"S+":d.getMilliseconds()};var _t;for(var k in t){while(new RegExp("("+k+")").test(f)){_t=(RegExp.$1.length==1)? t[k]:("0000000000".substring(0,RegExp.$1.length)+t[k]).substr((""+t[k]).length);f=f.replace(RegExp.$1,_t+"");}}return f;};$jskey.$replace=function(str,t,u){str=str+"";var i=str.indexOf(t);var r="";while(i !=-1){r+=str.substring(0,i)+u;str=str.substring(i+t.length,str.length);i=str.indexOf(t);}r=r+str;return r;};$jskey.$src=$jskey.$replace($jskey.$byTagName("script")[$jskey.$byTagName("script").length-1].src+"","\\","/");$jskey.$show=function(msg){if((msg||"").length>0){alert(msg);}};$jskey.$path=$jskey.$src.substring(0,$jskey.$src.lastIndexOf("/")+1);$jskey.$url=function(){var _p=window.location.pathname;return _p.substring(0,_p.lastIndexOf("/"));};$jskey.$random=function(){return(new Date().getTime())+"";};$jskey.$link=function(path){var k=document.createElement("link");k.rel="stylesheet";k.type="text/css";k.href=path;document.getElementsByTagName("head")[0].appendChild(k);k=null;};
$jskey.checkbox={getSelected:function(name,msg){var _a=[];var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){_a[_a.length]={"id":_e[i].getAttribute("id"),"value":_e[i].value};}}if(_a.length==0){$jskey.$show(msg);}return _a;},countSelected:function(name){return(this.getSelected(name)).length;},getSelectedBySeparator:function(name,sep){var _v="";var _a=this.getSelected(name);for(var i=0;i<_a.length;i++){_v+=((_v=="")? "":sep)+_a[i].value;}return _v;},getSelectedIdBySeparator:function(name,sep){var _v="";var _a=this.getSelected(name);for(var i=0;i<_a.length;i++){_v+=((_v=="")? "":sep)+_a[i].id;}return _v;},getSingleSelected:function(name,msg){var _o=null;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){if(_o==null){_o={"id":_e[i].getAttribute("id"),"value":_e[i].value};}else{$jskey.$show(msg);_o=null;break;}}}return _o;},isSelected:function(name){var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){return true;}}return false;},reselect:function(name,chk){var _e=$jskey.$byName(name);if(chk==null){for(var i=0;i<_e.length;i++){_e[i].checked=!(_e[i].checked);}}else{chk=(chk)? true:false;for(var i=0;i<_e.length;i++){_e[i].checked=chk;}}}};
$jskey.radio={getSelected:function(name,msg){var _o=null;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].checked){_o={"id":_e[i].getAttribute("id"),"value":_e[i].value};break;}}if(_o==null){$jskey.$show(msg);}return _o;},getId:function(name,defaultValue){var _a=this.getSelected(name);return(_a==null)?defaultValue:_a.id;},getValue:function(name,defaultValue){var _a=this.getSelected(name);return(_a==null)?defaultValue:_a.value;},reselect:function(name,value,isDisabled){var _c=false;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){if(_e[i].value==value){_e[i].disabled=false;_e[i].checked=true;_c=true;}else{_e[i].disabled=isDisabled||false;}}if(!_c){_e[0].disabled=false;_e[0].checked=true;}return _c;},reset:function(name,isDisabled){isDisabled=isDisabled ? true:false;var _e=$jskey.$byName(name);for(var i=0;i<_e.length;i++){_e[i].disabled=isDisabled;_e[i].checked=false;}}};
$jskey.select={$fnSwap:function(o1,o2){var _t=o1.value;o1.value=o2.value;o2.value=_t;_t=o1.text;o1.text=o2.text;o2.text=_t;_t=o1.selected;o1.selected=o2.selected;o2.selected=_t;},exist:function(id,v){var _o=$jskey.$(id);for(var i=0;i<_o.options.length;i++){if(v==_o.options[i].value){return true;}}return false;},add:function(id,t,v){var _o=$jskey.$(id);_o.options[_o.options.length]=new Option(t,v);},copy:function(fromID,toID,isSelected,isClear){var _o1=$jskey.$(fromID);var _o2=$jskey.$(toID);if(_o1.options.length>-1){if(isSelected){if(_o1.selectedIndex>-1){if(isClear){_o2.options.length=0;}for(var i=0;i<_o1.options.length;i++){if(_o1.options[i].selected&&!this.exist(toID,_o1.options[i].value)){_o2.options[_o2.options.length]=new Option(_o1.options[i].text,_o1.options[i].value);}}}}else{if(isClear){_o2.options.length=0;}for(var i=0;i<_o1.options.length;i++){_o2.options[_o2.options.length]=new Option(_o1.options[i].text,_o1.options[i].value);}}}},move:function(id,count,isWay){var _o=$jskey.$(id);var _a=_o.options;if(count==0){var _t=null;if(isWay){for(var i=0;i<_a.length;i++){if(_a[i].selected&&_t){_o.insertBefore(_a[i],_t);}else if(!_t&&!_a[i].selected){_t=_a[i];}}}else{for(var i=_a.length-1;i>-1;i--){if(_a[i].selected){if(_t){_t=_o.insertBefore(_a[i],_t);}else{_t=_o.appendChild(_a[i]);}}}}}else{if(isWay){for(var j=0;j<count;j++){for(var i=1;i<_a.length;i++){if(_a[i].selected&&!_a[i-1].selected){this.$fnSwap(_a[i],_a[i-1]);}}}}else{for(var j=0;j<count;j++){for(var i=_a.length-2;i>-1;i--){if(_a[i].selected&&!_a[i+1].selected){this.$fnSwap(_a[i],_a[i+1]);}}}}}},remove:function(id,isSelected){var _o=$jskey.$(id);if(isSelected){for(var i=_o.length-1;i>=0;i--){if(_o.options[i].selected){_o.remove(i);}}}else{_o.options.length=0;}},reselect:function(id,isSelected){var _o=$jskey.$(id);var _a=_o.options;if(isSelected==null){for(var i=0;i<_a.length;i++){_a[i].selected=!_a[i].selected;}}else{isSelected=(isSelected)? true:false;for(var i=0;i<_a.length;i++){_a[i].selected=isSelected;}}},swap:function(fromID,toID,isSelected){var _o1=$jskey.$(fromID);var _o2=$jskey.$(toID);if(_o1.options.length>-1){var _a=[];if(isSelected){if(_o1.selectedIndex>-1){for(var i=_o1.length-1;i>=0;i--){if(_o1.options[i].selected){_a[_a.length]=new Option(_o1.options[i].text,_o1.options[i].value);_o1.remove(i);}}for(var i=0;i<_a.length;i++){_o2.options[_o2.options.length]=_a[i];}}}else{for(var i=_o1.length-1;i>=0;i--){_a[_a.length]=new Option(_o1.options[i].text,_o1.options[i].value);_o1.remove(i);}for(var i=0;i<_a.length;i++){_o2.options[_o2.options.length]=_a[i];}}}}};
$jskey.dialog={returnValue:null,dialogArguments:null,close:function(){},callback:function(){},showDialog:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}var defaults={"id":"dsworkDialog","title":"Window","url":"","width":400,"height":300,"args":{"data":{},"url":""},"iconCls":'icon_system',"maximizable":false,"minimizable":false,"collapsible":false,"resizable":true,"modal":true,"zIndex":9999};var opts=$.extend(defaults,o);if(opts.args&&opts.args.url){if(opts.args.url.indexOf("/")!=0&&opts.args.url.indexOf("http:")!=0&&opts.args.url.indexOf("https:")!=0&&o.url.indexOf("file:")!=0&&o.url.indexOf(":")!=1){opts.args.url=$jskey.$url()+"/"+opts.args.url;}}$jskey.dialog.dialogArguments={url:opts.url,args:opts.args};var $win=$('#'+opts.id);$jskey.dialog.returnValue=null;var url=opts.url+((opts.url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();if($win.length){$('iframe',$win)[0].contentWindow.location.href=url;$win.dialog('open');}else{$win=$('<div id="'+opts.id+'" style="overflow:hidden;"></div>').appendTo('body');opts.onClose=function(){$jskey.dialog.dialogArguments=null;$win.dialog('destroy');try{if(o.callback&&typeof(o.callback)=="function"){o.callback();}else{$jskey.dialog.callback();}}catch(e){}};opts.content='<iframe scrolling="auto" src="" width="100%" height="100%" style="width:100%;height:100%;border:0;" frameborder="0"></iframe>';$win.dialog(opts);$('iframe',$win)[0].contentWindow.location.href=url;}$jskey.dialog.close=function(){$win.dialog('close');};},showModalDialog:function(url,args,width,height,status,scroll,resizable){url+=((url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();return window.showModalDialog(url,args,("help:no;center:yes;dialogWidth:"+width+"px;dialogHeight:"+height+"px;status:"+status+";scroll:"+scroll+";resizable:"+resizable+";dialogTop:"+((window.screen.availHeight-height)/ 3)+";dialogLeft:"+((window.screen.availWidth-width)/ 2)));},show:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}o.url=o.url||arguments[2]||"";if(o.url.indexOf("/")!=0&&o.url.indexOf("http:")!=0&&o.url.indexOf("https:")!=0&&o.url.indexOf("file:")!=0&&o.url.indexOf(":")!=1){o.url=$jskey.$url()+"/"+o.url;}o.height=o.height||arguments[5]||450;$jskey.dialog.returnValue=null;var reValue=this.showModalDialog($jskey.$path+"themes/dialog/jskey_dialog.html",{title:o.title||arguments[1]||"",url:o.url,args:o.args||arguments[3]||"",height:o.height},o.width||arguments[4]||600,o.height,o.status||arguments[7]||"no",o.scroll||arguments[8]||"auto",o.resizable||arguments[9]||"yes");if(o.reload||arguments[6]||false){window.location.reload();}else{var v=reValue;$jskey.dialog.returnValue=v;$jskey.dialog.callback();return v;}},openWindow:function(url,target,width,height,top,left,status,scroll,resizable,menubar,fullscreen,toolbar,location,directories,channelmode){url+=((url.indexOf("?")==-1)? "?jskey=":"&jskey=")+$jskey.$random();window.open(url,target,("width="+width+",height="+height+",top:"+top+",left:"+left+",status="+status+",scrollbars="+scroll+",resizable="+resizable+",menubar="+menubar+",fullscreen="+fullscreen+",toolbar="+toolbar+",location="+location+",directories="+directories+",channelmode="+channelmode));},open:function(){var o=arguments[0];if(typeof(o)!="object"){o={};}o.width=o.width||arguments[3]||600;o.height=o.height||arguments[4]||450;o.top=o.top||arguments[5]||((window.screen.availHeight-o.height)/ 3);o.left=o.left||arguments[6]||((window.screen.availWidth-o.width)/ 2);this.openWindow(o.url||arguments[1]||"",o.target||arguments[2]||"",o.width,o.height,o.top,o.left,o.status||arguments[7]||"no",o.scroll||arguments[8]||"yes",o.resizable||arguments[9]||"yes",o.menubar||arguments[10]||"no",o.fullscreen||arguments[11]||"no",o.toolbar||arguments[12]||"no",o.location||arguments[13]||"no",o.directories||arguments[14]||"no",o.channelmode||arguments[15]||"no");}};
$jskey.dialog.showChoose=function(m){m.url=$jskey.$path+"themes/dialog/jskey_choose.html";return $jskey.dialog.showDialog(m);};
$jskey.dialog.showChooseKey=function(m){m.url=$jskey.$path+"themes/dialog/jskey_choose_key.html";return $jskey.dialog.showDialog(m);};
$jskey.Map=function(){this.$v=[];};$jskey.Map.prototype={$fnChk:function(v){return(typeof(v)!="string")? v+"":v.replace(/(^\s*)|(\s*$)/g,"");},put:function(k,v){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){this.$v[i][1]=v;return false;}}this.$v[this.$v.length]=[k,v];return true;}},putTry:function(k,v){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return false;}}this.$v[this.$v.length]=[k,v];return true;}return false;},remove:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){this.$v.splice(i,1);break;}}}},get:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return this.$v[i][1];}}}return null;},getKeyArray:function(){var _a=[];for(var i=0;i<this.$v.length;i++){_a[_a.length]=this.$v[i][0];}return _a;},getValueArray:function(){var _a=[];for(var i=0;i<this.$v.length;i++){_a[_a.length]=this.$v[i][1];}return _a;},size:function(){return this.$v.length;},containsKey:function(k){k=this.$fnChk(k);if(k.length>0){for(var i=0;i<this.$v.length;i++){if(k==this.$v[i][0]){return true;}}}return false;}};
$jskey.validator={"Char":{"v":/^[A-Za-z0-9_]+$/,"msg":"允许字母、数字、下划线"},"Chinese":{"v":/^[\u4e00-\u9fa5]+$/,"msg":"只允许中文"},"Email":{"v":/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,"msg":"格式错误"},"English":{"v":/^[A-Za-z]+$/,"msg":"只允许字母"},"Mobile":{"v":/^((0\d{2,3}\d{6,15})|(1[358]{1}\d{9}))$/,"msg":"请输入手机号码(纯数字)"},"Money":{"v":/^(([1-9](\d+)?)|0)(\.\d+)?$/,"msg":"请输入金额"},"Numeral":{"v":/^\d+$/,"msg":"请输入数字"},"Phone":{"v":/^((0\d{2,3})|(\(0\d{2,3}\)))?(-)?[1-9]\d{6,7}(([\-0-9]+)?[^\D]{1})?$/,"msg":"请输入电话号码"},"Require":{"v":/\S+/,"msg":"必填"},"RequireCompact":{"v":/^\S+$/,"msg":"必填(无空格)"},"RequireTrim":{"v":/(^[^\s]{1}(.+)?[^\s]{1}$)|(^[^\s]{1}$)/,"msg":"必填(无前后空格)"},"Url":{"v":/^http(s)?:\/\/[\w\-]+(\.[\w\-]+)*(:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{1,3}|[1-9]))?(\/[\d\w\-\/\=\!\@\#\$\%\~\&\(\)\[\]\{\};\?\*\+\.]*)?$/,"msg":"格式错误"},"Zip":{"v":/^[1-9]\d{5}$/,"msg":"邮政编码不存在"},"Number":{"v":"this._Number(value)","msg":"请输入数值"},"NumberPlus":{"v":"this._NumberPlus(value)","msg":"请输入正数"},"NumberMinus":{"v":"this._NumberMinus(value)","msg":"请输入负数"},"Integer":{"v":"this._Integer(value)","msg":"请输入整数"},"IntegerPlus":{"v":"this._IntegerPlus(value)","msg":"请输入正整数"},"IntegerMinus":{"v":"this._IntegerMinus(value)","msg":"请输入负整数"},"Custom":{"v":"this._Custom(value,getAttribute('regexp'))","msg":""},"DateCheck":{"v":"this._DateCheck(value,getAttribute('operator'),$jskey.$(getAttribute('to')).value,getAttribute('require'))","msg":"日期不正确"},"Filename":{"v":"this._Filename(value)","msg":"不能为空,且不能包含下列字符 \\ \/ \:\* \? \"<>"},"Filter":{"v":"this._Filter(value,getAttribute('accept'))","msg":""},"Function":{"v":"this._Function(value,getAttribute('fn'))","msg":""},"Group":{"v":"this._Group(getAttribute('name'),getAttribute('min'),getAttribute('max'))","msg":""},"IdCard":{"v":"this._IdCard(value)","msg":"身份证号码错误"},"Limit":{"v":"this._Limit(value.length,getAttribute('min'),getAttribute('max'))","msg":""},"LimitB":{"v":"this._Limit(this._LenB(value),getAttribute('min'),getAttribute('max'))","msg":""},"Password":{"v":"this._Password(value)","msg":"密码不符合安全规则"},"Repeat":{"v":"value==$jskey.$(getAttribute('to')).value","msg":"输入不一致"},"Range":{"v":"this._Range(value,getAttribute('min'),getAttribute('max'))","msg":"请输入正确整数"},"UploadFile":{"v":"this._UploadFile(value)","msg":"请上传文件"},"UploadFileCheck":{"v":"this._UploadFileCheck(value)","msg":"请上传文件或取消(清空上传内容)"},$ErrorObj:[],$ErrorMsg:["\u4ee5\u4e0b\u539f\u56e0\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff1a\t\t\t\t"],$AlertMsg:["\u4ee5\u4e0b\u539f\u56e0\u5bfc\u81f4\u63d0\u4ea4\u5931\u8d25\uff1a\t\t\t\t"],$num:1,$Array:function(formID,inputID,inputObject){var m=null;if(formID.length==0){m={arr:[]};var _o=(inputID.length>0 ? $jskey.$(inputID):inputObject);this.$Clear(_o);var _dt=_o.getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){return m;}m.arr.push(_o);}else{m=$jskey.$(formID)||event.srcElement;if(m.arr !=null){for(var i=0;i<m.arr.length;i++){with(m.arr[i]){this.$Clear(m.arr[i]);}}}m.arr=[];var _t=m.getElementsByTagName('*');var _dt;for(var i=0;i<_t.length;i++){this.$Clear(_t[i]);if(_t[i].getAttribute){_dt=_t[i].getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){continue;}m.arr.push(_t[i]);}}}return m;},$OnBlur:function(obj,mode,show){this.Validate(null,mode,null,obj,show);},$OnFocus:function(obj){this.$Clear(obj);},Init:function(){var formID=arguments[0]||"";var mode=arguments[1]||"";var inputID=arguments[2]||"";var inputObject=arguments[3]||"";var show=arguments[4];if(show==null){show=true;}show=show ? true:false;var obj=this.$Array(formID,inputID,inputObject);var count=obj.arr.length;var e=this;for(var i=0;i<count;i++){var v=obj.arr[i];var _dt=v.getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"||v.JskeyValidatorTrans){continue;}v.JskeyValidatorTrans=true;v.JskeyValidatorBlur=v.onblur;v.JskeyValidatorFocus=v.onfocus;v.JskeyValidatorShow=show;v.JskeyValidatorMode=mode;v.onblur=function(){e.$OnBlur(this,this.JskeyValidatorMode,this.JskeyValidatorShow);if(typeof(this.JskeyValidatorBlur)=='function'){this.JskeyValidatorBlur();}};v.onfocus=function(){e.$OnFocus(this);if(typeof(this.JskeyValidatorFocus)=='function'){this.JskeyValidatorFocus();}};if(_dt=="Group"){var _g=document.getElementsByName(v.getAttribute("name"));for(var j=_g.length-1;j>=0;j--){_g[j].JskeyValidatorObj=v;if(!_g[j].JskeyValidatorTrans){_g[j].JskeyValidatorTrans=true;_g[j].JskeyValidatorBlur=_g[j].onblur;_g[j].JskeyValidatorFocus=_g[j].onfocus;_g[j].JskeyValidatorShow=show;_g[j].JskeyValidatorMode=mode;_g[j].onblur=function(){e.$OnBlur(this.JskeyValidatorObj,this.JskeyValidatorMode,this.JskeyValidatorShow);if(typeof(this.JskeyValidatorBlur)=='function'){this.JskeyValidatorBlur();}};_g[j].onfocus=function(){e.$OnFocus(this.JskeyValidatorObj);if(typeof(this.JskeyValidatorFocus)=='function'){this.JskeyValidatorFocus();}};}}}}},Validate:function(){var formID=arguments[0]||"";var mode=arguments[1]||"";var inputID=arguments[2]||"";var inputObject=arguments[3]||"";var show=arguments[4];if(show==null){show=true;}show=show ? true:false;this.Init(formID,mode,inputID,inputObject,show);var obj=this.$Array(formID,inputID,inputObject);var count=obj.arr.length;var errMsg="";var alertMsg="";this.$ErrorMsg.length=1;this.$AlertMsg.length=1;this.$ErrorObj.length=1;this.$ErrorObj[0]=obj;for(var i=0;i<count;i++){with(obj.arr[i]){var _dt=getAttribute("dataType");if(typeof(_dt)=="object"||typeof(this[_dt])=="undefined"){continue;}if(getAttribute("require")=="false"&&value==""){continue;}if(getAttribute("msg")==null){errMsg=this[_dt].msg;}else{errMsg=getAttribute("msg");}if(getAttribute("alertMsg")==null||typeof(getAttribute("alertMsg"))=="undefined"){alertMsg=errMsg;}else{alertMsg=getAttribute("alertMsg");}switch(_dt){case "Number":case "NumberPlus":case "NumberMinus":case "Integer":case "IntegerPlus":case "IntegerMinus":case "Custom":case "DateCheck":case "Filename":case "Filter":case "Function":case "Group":case "IdCard":case "Limit":case "LimitB":case "Password":case "Repeat":case "Range":case "UploadFile":case "UploadFileCheck":if(!eval(this[_dt].v)){this.$AddError(i,errMsg,alertMsg);}break;default:if(!this[_dt].v.test(value)){this.$AddError(i,errMsg,alertMsg);}break;}}}if(this.$ErrorMsg.length>1){mode=mode||1;var _c=this.$ErrorObj.length;switch(mode){case 2:for(var i=1;i<_c;i++){this.$ErrorObj[i].style.color="#ff0000";}case 1:alert(this.$AlertMsg.join("\n"));break;case 4:alert(this.$AlertMsg.join("\n"));case 3:var _temp=(typeof(jQuery)=="function"&&$jskey.tooltip);for(var i=1;i<_c;i++){try{var _o=document.createElement("SPAN");this.$num++;_o.id="__ErrorMsgPanel"+this.$num;_o.style.color="#ff0000";this.$Clear(this.$ErrorObj[i]);this.$ErrorObj[i].JskeyValidator=_o.id;this.$ErrorObj[i].parentNode.appendChild(_o);_o.innerHTML=this.$ErrorMsg[i].replace(/\d+:/,"");if(_temp){var v=jQuery("#"+_o.id);var m=$("<img style=\"vertical-align:middle;\" src=\""+$jskey.$path+"themes/tooltip/tipx.gif"+"\"/>").attr("msg",v.html());v.html(m);m.tipx();if(show){m.tipx("show");}}}catch(e){alert(e.description);}}break;default:alert(this.$AlertMsg.join("\n"));break;}return false;}return true;},$Clear:function(o){try{with(o){if(style.color=="#ff0000"){style.color="";}parentNode.removeChild($jskey.$(JskeyValidator));JskeyValidator=null;}}catch(e){}},$AddError:function(index,emsg,amsg){this.$ErrorObj[this.$ErrorObj.length]=this.$ErrorObj[0].arr[index];this.$ErrorMsg[this.$ErrorMsg.length]=this.$ErrorMsg.length+":"+emsg;this.$AlertMsg[this.$AlertMsg.length]=this.$AlertMsg.length+":"+amsg;},_Number:function(v){if(!isNaN(v)){if(v.length==0||v.indexOf("+")!=-1){return false;}if(v.indexOf(".")==0||v.indexOf("-.")==0||v.indexOf("00")==0||v.indexOf("-00")==0||v.lastIndexOf(".")==v.length-1){return false;}return true;}return false;},_NumberPlus:function(v){if(this._Number(v)){if(v.indexOf("-")!=-1){return false;}return true;}return false;},_NumberMinus:function(v){if(this._Number(v)){if(v.indexOf("-")!=-1){return true;}}return false;},_Integer:function(v){if(this._Number(v)){if(v.indexOf(".")!=-1){return false;}return true;}return false;},_IntegerPlus:function(v){if(this._Integer(v)){if(v.indexOf("-")!=-1){return false;}return true;}return false;},_IntegerMinus:function(v){if(this._Integer(v)){if(v.indexOf("-")!=-1){return true;}}return false;},_Custom:function(op,reg){return new RegExp(reg,"g").test(op);},_DateCheck:function(op1,operator,op2,require){if(require=="false"&&op2.length==0){return true;}try{if(op1.length==0||op2.length==0){return false;}var d1=_$ToDate(op1);var d2=_$ToDate(op2);if(typeof(d1)!="object"||typeof(d2)!="object"){return false;}switch(operator){case "==":return(d1==d2);case "!=":return(d1 !=d2);case ">":return(d1>d2);case ">=":return(d1>=d2);case "<":return(d1<d2);case "<=":return(d1<=d2);default:return(d1>=d2);}}catch(e){}return false;function _$ToDate(op){try{var o,_y,_M,_d;o=op.match(new RegExp("^(\\d{4})([-./])(\\d{1,2})\\2(\\d{1,2})"));_d=o[4];_M=o[3]* 1;_y=o[1];if(!parseInt(_M)){return "";}_M=_M==0 ? 12:_M;return new Date(_y,_M-1,_d);}catch(ee){}return "";}},_Filename:function(v){if(v.length==0){return false;}if(v.indexOf("\\")==-1&&v.indexOf("\/")==-1&&v.indexOf("\:")==-1&&v.indexOf("\*")==-1&&v.indexOf("\?")==-1&&v.indexOf("\"")==-1&&v.indexOf("<")==-1&&v.indexOf(">")==-1&&v.indexOf(".")!=0&&v.lastIndexOf(".")!=(v.length-1)){return true;}return false;},_Filter:function(input,filter){return new RegExp("^.+\.(?=EXT)(EXT)$".replace(/EXT/g,filter.split(/\s*,\s*/).join("|")),"gi").test(input);},_Function:function(value,fn){var result=false;value=$jskey.$replace(value,"\"","\\\"");value=$jskey.$replace(value,"\r","");value=$jskey.$replace(value,"\n","");eval("result="+fn+"(\""+$jskey.$replace(value,"\"","\\\"")+"\")");return result;},_Group:function(name,min,max){var _g=document.getElementsByName(name);var chk=0;min=min||1;max=max||_g.length;for(var i=_g.length-1;i>=0;i--){if(_g[i].checked){chk++;}}return min<=chk&&chk<=max;},_IdCard:function(v){var _iSum=0;if(!(/^\d{17}([a-z\d\*]{1})$/i.test(v)||/^\d{15}$/i.test(v))){return false;}v=v.replace(/[a-z\*]{1}$/i,"a");if("11_12_13_14_15_21_22_23_31_32_33_34_35_36_37_41_42_43_44_45_46_50_51_52_53_54_61_62_63_64_65_71_81_82_91".indexOf(v.substr(0,2))==-1){return false;}if(v.length==15){v=v.substring(0,6)+"19"+v.substring(6,15);var _i=0;var _ti=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];var _tc=['1','0','X','9','8','7','6','5','4','3','2'];for(var i=0;i<17;i++){_i+=v.substr(i,1)* _ti[i];}v+=_tc[_i % 11];}var _bd=v.substr(6,4)+"/"+v.substr(10,2)+"/"+v.substr(12,2);if(_bd !=$jskey.$dateFormat(new Date(_bd),"yyyy/MM/dd")){return false;}for(var i=17;i>=0;i--){_iSum+=(Math.pow(2,i)% 11)* parseInt(v.charAt(17-i),11);}if(_iSum%11 !=1){return false;}return true;},_Limit:function(len,min,max){min=min||0;max=max||Number.MAX_VALUE;return min<=len&&len<=max;},_LenB:function(v){return v.replace(/[^\x00-\xff]/g,"***").length;},_Password:function(v){return !(/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/.test(v));},_Range:function(v,min,max){min=min||(-1 * Number.MAX_VALUE);max=max||Number.MAX_VALUE;return this._Integer(v)&&parseInt(min)<=parseInt(v)&&parseInt(v)<=parseInt(max);},_UploadFile:function(v){if(v !=""){if(v=="0"){return false;}return true;}return false;},_UploadFileCheck:function(v){return v=="";},submit:function(containerid,submitid,type){if(this.Validate(containerid,3)){if(type==null||type !="select"){var _msg="是否确定提交?";if(type=="insert")_msg="是否确定提交?";else if(type=="update")_msg="是否确定保存?";if(!confirm(_msg)){return false;}}$jskey.$(submitid).click();return true;}return false;}};
if(true){(new Image()).src=$jskey.$path+"themes/tooltip/tipx.gif";}
$jskey.Calendar=function(){this.d=new Date();this.$p={"s":1,"m":2,"H":3,"d":4,"M":5,"y":6,"min":"0001-01-01 00:00:00","max":"9999-12-31 23:59:59","cy":this.d.getFullYear(),"cM":this.d.getMonth(),"cd":this.d.getDate()};this.$s={};this.v="jskeyCalendar";this.$k={"div":this.v+"_div","panel":this.v+"_p","show":this.v+"_sh","close":this.v+"_sh_c","title":this.v+"_sh_t","data":this.v+"_sh_d","prevY":this.v+"Yp","y":this.v+"_y","nextY":this.v+"Yn","prevYY":this.v+"YYp","nextYY":this.v+"YYn","prevM":this.v+"Mp","M":this.v+"Mc","nextM":this.v+"Mn","table":this.v+"_T","H":this.v+"_H","m":this.v+"_m","s":this.v+"_s","bclear":this.v+"_r","btoday":this.v+"_d","bclose":this.v+"_e"};this.$c={"format":"yyyy-MM-dd","lang":0,"left":0,"top":0,"level":this.$p.d};this.$focus=false;this.$input=null;this.$div=null;this.$panel=null;this.$selTD=null;this.$lang={"y":["",""],"M":[["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]],"w":[["日","一","二","三","四","五","六"],["SUN","MON","TUR","WED","THU","FRI","SAT"]],"t":[["","秒","分","时"],["","S","M","H"]],"f":[["","秒钟","分钟","时钟","","月份","年份"],["","second","minute","hour","","month","year"]],"b":[["确定","清空","关闭"],["OK","CLS","CLOSE"]]};};
$jskey.Calendar.prototype={$fnSkin:function(n){$jskey.$link($jskey.$path+"themes/calendar/"+n+"/skin.css");},$fnReset:function(d){var E=this;var S=E.$s;S.y=d.getFullYear();S.M=d.getMonth();S.d=d.getDate();S.H=E.$fnNum(d.getHours());S.m=E.$fnNum(d.getMinutes());S.s=E.$fnNum(d.getSeconds());},$fnNum:function(v){return v<10 ? '0'+(v|0):v;},$fnYear:function(v){v="000"+v;return v.substring(v.length-4,v.length);},$fnDate:function(){var S=this.$s;return new Date(S.y,S.M,S.d,S.H,S.m,S.s);},$fnGetWeek:function(d){var _co=new Date(d.getFullYear(),0,1);var cDay=parseInt(Math.abs(d-_co)/ 86400000,10)+1;var _w=(cDay+_co.getDay())/ 7;var _wInt=parseInt(_w,10);return((_w>_wInt)?(_wInt+1):_wInt);},$fnFormat:function(d,f){var t={"y+":d.getFullYear(),"M+":d.getMonth()+1,"d+":d.getDate(),"H+":d.getHours(),"m+":d.getMinutes(),"s+":d.getSeconds(),"S+":d.getMilliseconds(),"W+":this.$fnGetWeek(d),"w+":this.$lang.w[this.$c.lang][d.getDay()]};var _t;for(var k in t){while(new RegExp("("+k+")").test(f)){_t=(RegExp.$1.length==1)? t[k]:("0000000000".substring(0,RegExp.$1.length)+t[k]).substr((""+t[k]).length);f=f.replace(RegExp.$1,_t+"");}}return f;},$fnMyDate:function(f){var y=1,M=0,d=1,H=0,m=0,s=0;switch(f.length){case 19:s=parseInt(f.substring(17,19),10);case 16:m=parseInt(f.substring(14,16),10);case 13:H=parseInt(f.substring(11,13),10);case 10:d=parseInt(f.substring(8,10),10);case 7:M=parseInt(f.substring(5,7),10)-1;case 4:y=parseInt(f.substring(0,4),10);}var v=new Date(y,M,d,H,m,s);var o={y:v.getFullYear(),M:v.getMonth(),d:v.getDate(),H:v.getHours(),m:v.getMinutes(),s:v.getSeconds()};return o;},$fnInit:function(){var cid=this.$k.div;if($jskey.$(cid)==null){var s='<div id="'+this.$k.panel+'" style="position:absolute;display:none;z-index:9999;" class="jskey_cal"></div>';if(document.all){s+='<iframe style="position:absolute;z-index:8888;width:expression(this.previousSibling.offsetWidth);';s+='height:expression(this.previousSibling.offsetHeight);';s+='left:expression(this.previousSibling.offsetLeft);top:expression(this.previousSibling.offsetTop);';s+='display:expression(this.previousSibling.style.display);" scrolling="no" frameborder="no"></iframe>';}var o=document.createElement("div");o.innerHTML=s;o.id=cid;o.style.display="none";document.body.appendChild(o);this.$panel=$jskey.$(this.$k.panel);this.$div=$jskey.$(cid);}},$fnReturn:function(dt){var E=this;if(E.$input !=null){E.$input.value=dt;}E.$hide();if(E.$input.onchange==null){if(typeof(E.$input.changeEvent)=='function'){E.$input.changeEvent();}return;}var ev=E.$input.onchange.toString();ev=ev.substring(((ev.indexOf("ValidatorOnChange();")>0)? ev.indexOf("ValidatorOnChange();")+20:ev.indexOf("{")+1),ev.lastIndexOf("}"));var fun=new Function(ev);E.$input.changeEvent=fun;E.$input.changeEvent();},$fnDraw:function(){var E=this;var K=this.$k,a=[];a.push('<div style="z-index:10000;">');a.push('<div class="dymd div">');a.push('<div class="dy">');a.push('<div id="'+K.prevY+'" class="btn dp" type="button"><div class="jsarr"><div class="left"></div></div></div>');a.push('<div id="'+K.y+'" class="btn Year"></div>');a.push('<div id="'+K.nextY+'" class="btn dn" type="button"><div class="jsarr"><div class="right"></div></div></div>');a.push('</div>');a.push('<div class="dm"'+(E.$c.level>E.$p.M?' style="display:none;"':'')+'>');a.push('<div id="'+K.prevM+'" class="btn dp" type="button"><div class="jsarr"><div class="left"></div></div></div>');a.push('<div id="'+K.M+'" class="btn Month"></div>');a.push('<div id="'+K.nextM+'" class="btn dn" type="button"><div class="jsarr"><div class="right"></div></div></div>');a.push('</div>');a.push('</div>');a.push('<div class="date div">');a.push('<table id="'+K.table+'" style="display:'+(E.$c.level>=E.$p.M ? 'none':'')+';" cellpadding="0" cellspacing="0">');a.push('<tr>');for(var i=0;i<7;i++){a.push('<th class="title">'+E.$lang.w[E.$c.lang][i]+'</th>');}a.push('</tr>');for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<7;j++){if(j==0||j==6){a.push('<td tn="tdHoliday"></td>');}else{a.push('<td tn="tdDay"></td>');}}a.push('</tr>');}a.push('</table>');a.push('<div id="'+K.show+'" class="choose">');a.push('<div class="title"><div id="'+K.close+'" class="close" style="float:right;">×</div><div>&nbsp;<span id="'+K.title+'"></span>&nbsp;</div></div>');a.push('<div id="'+K.data+'"></div>');a.push('</div>');a.push('</div>');a.push('<div class="dhmsbtn div">');a.push('<div class="dhms">');a.push('<label'+(E.$c.level>E.$p.H ? ' style="display:none;"':'')+'><div id="'+K.H+'" class="btn"></div>'+E.$lang.t[E.$c.lang][3]+'</label>');a.push('<label'+(E.$c.level>E.$p.m ? ' style="display:none;"':'')+'><div id="'+K.m+'" class="btn"></div>'+E.$lang.t[E.$c.lang][2]+'</label>');a.push('<label'+(E.$c.level>E.$p.s ? ' style="display:none;"':'')+'><div id="'+K.s+'" class="btn"></div>'+E.$lang.t[E.$c.lang][1]+'</label>');a.push('</div>');a.push('<div class="dbtn">');a.push('<div id="'+K.bclear+'" class="btn">'+E.$lang.b[E.$c.lang][1]+'</div>');a.push('<div id="'+K.btoday+'" class="btn">'+E.$lang.b[E.$c.lang][0]+'</div>');a.push('<div id="'+K.bclose+'" class="btn">'+E.$lang.b[E.$c.lang][2]+'</div>');a.push('</div>');a.push('</div>');a.push('</div>');E.$panel.innerHTML=a.join("");var o=$jskey.$(K.prevY);o.onclick=function(){E.goPrevYear(E);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.nextY);o.onclick=function(){E.goNextYear(E);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.prevM);o.onclick=function(){E.goPrevMonth(E);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.nextM);o.onclick=function(){E.goNextMonth(E);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.bclear);o.onclick=function(){E.$fnReturn("");};o=$jskey.$(K.bclose);o.onclick=function(){E.$hide();};o=$jskey.$(K.y);o.onclick=function(){E.$fnDrawChoose(6,E.$s.y);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.M);o.onclick=function(){E.$fnDrawChoose(5);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.H);o.onclick=function(){E.$fnDrawChoose(3);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.m);o.onclick=function(){E.$fnDrawChoose(2);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.s);o.onclick=function(){E.$fnDrawChoose(1);};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.close);o.onclick=function(){$jskey.$(K.show).style.display="none";};o.onblur=function(){E.$fnBlur();};o=$jskey.$(K.btoday);o.onclick=function(){E.$fnReturn(E.$fnFormat(E.$fnDate(),E.$c.format));};},$fnDrawChoose:function(t,year){var E=this;var o=$jskey.$(E.$k.data),a=[];a.push('<table cellpadding="0" cellspacing="0">');if(t<4&&t>0){var m=10;if(t==3){m=4}for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td>'+E.$fnNum(i*m+j)+'</td>');}a.push('</tr>');}}else if(t==5){var m=2;for(var i=0;i<6;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td month="'+(i*m+j)+'">'+E.$lang.M[E.$c.lang][(i*m+j)]+'</td>');}a.push('</tr>');}}else{var m=4,y=parseInt(E.$fnYear(year).substr(0,3),10)*10;y=y%20==10 ? y-10:y;for(var i=0;i<5;i++){a.push('<tr>');for(var j=0;j<m;j++){a.push('<td year="'+(y+i*m+j)+'">'+E.$fnYear(y+i*m+j)+E.$lang.y[E.$c.lang]+'</td>');}a.push('</tr>');}a.push('<tr>');a.push('<td colspan="2" class="day" year="'+(y-20)+'" id="'+E.$k.prevYY+'"><div class="jsarr"><div class="up"></div></div></td>');a.push('<td colspan="2" class="day" year="'+(y+20)+'" id="'+E.$k.nextYY+'"><div class="jsarr"><div class="down"></div></div></td>');a.push('<tr>');}a.push('</table>');$jskey.$(E.$k.title).innerHTML=E.$lang.f[E.$c.lang][t];o.innerHTML=a.join("");var tds=$jskey.$(E.$k.data).getElementsByTagName("td");for(var i=0;i<tds.length;i++){var z=tds[i];var v=parseInt(z.innerHTML,10);if(t==6){var _id=z.getAttribute("id")||"";if(_id==E.$k.prevYY||_id==E.$k.nextYY){z.onclick=function(){E.$fnDrawChoose(6,this.getAttribute("year"));};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}else{if(v<E.$c.min.y||v>E.$c.max.y){}else if(v<=E.$c.min.y&&E.$s.M<E.$c.min.M){}else if(v>=E.$c.max.y&&E.$s.M>E.$c.max.M){}else{z.className="day";if(E.$s.y==z.getAttribute("year")){z.className="sel";z.isMe=true;}z.onclick=function(){E.$s.y=this.getAttribute("year");E.$bindData();};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}}}else if(t==5){if(E.$s.y<E.$c.min.y||E.$s.y>E.$c.max.y){}else if((E.$s.y==E.$c.min.y&&(v-1)<E.$c.min.M)||(E.$s.y==E.$c.max.y&&(v-1)>E.$c.max.M)){}else{z.className="day";if(E.$s.M==z.getAttribute("month")){z.className="sel";z.isMe=true;}z.onclick=function(){E.$s.M=this.getAttribute("month");E.$bindData();};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}}else if(t==3){if(E.$s.y<=E.$c.min.y&&E.$s.M<=E.$c.min.M&&E.$s.d<=E.$c.min.d&&v<E.$c.min.H){}else if(E.$s.y>=E.$c.max.y&&E.$s.M>=E.$c.max.M&&E.$s.d>=E.$c.max.d&&v>E.$c.max.H){}else{z.className="day";if(E.$s.H==z.innerHTML){z.className="sel";z.isMe=true;}z.onclick=function(){E.$s.H=this.innerHTML;E.$bindData();};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}}else if(t==2){if(E.$s.y<=E.$c.min.y&&E.$s.M<=E.$c.min.M&&E.$s.d<=E.$c.min.d&&E.$s.H<=E.$c.min.H&&v<E.$c.min.m){}else if(E.$s.y>=E.$c.max.y&&E.$s.M>=E.$c.max.M&&E.$s.d>=E.$c.max.d&&E.$s.H>=E.$c.max.H&&v>E.$c.max.m){}else{z.className="day";if(E.$s.m==z.innerHTML){z.className="sel";z.isMe=true;}z.onclick=function(){E.$s.m=this.innerHTML;E.$bindData();};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}}else if(t==1){if(E.$s.y<=E.$c.min.y&&E.$s.M<=E.$c.min.M&&E.$s.d<=E.$c.min.d&&E.$s.H<=E.$c.min.H&&E.$s.m<=E.$c.min.m&&v<E.$c.min.s){}else if(E.$s.y>=E.$c.max.y&&E.$s.M>=E.$c.max.M&&E.$s.d>=E.$c.max.d&&E.$s.H>=E.$c.max.H&&E.$s.m>=E.$c.max.m&&v>E.$c.max.s){}else{z.className="day";if(E.$s.s==z.innerHTML){z.className="sel";z.isMe=true;}z.onclick=function(){E.$s.s=this.innerHTML;E.$bindData();};z.onmouseover=function(){this.className="over";};z.onmouseout=function(){this.className=this.isMe?"sel":"day";};}}}$jskey.$(E.$k.show).style.display="";},goPrevYear:function(E){if(E.$s.y<=E.$c.min.y){return;}if((E.$s.y-1)<=E.$c.min.y&&E.$s.M<E.$c.min.M){return;}E.$s.y--;E.$bindData();},goNextYear:function(E){if(E.$s.y>=E.$c.max.y){return;}if((E.$s.y+1)>=E.$c.max.y&&E.$s.M>E.$c.max.M){return;}E.$s.y++;E.$bindData();},goPrevMonth:function(E){if(E.$s.y<=E.$c.min.y&&E.$s.M<=E.$c.min.M){return;}E.$s.M--;if(E.$s.M==-1){E.$s.y--;E.$s.M=11;}E.$bindData();},goNextMonth:function(E){if(E.$s.y>=E.$c.max.y&&E.$s.M>=E.$c.max.M){return;}E.$s.M++;if(E.$s.M==12){E.$s.y++;E.$s.M=0;}E.$bindData();},$fnGetViewArray:function(y,m){var a=[];var firstDay=new Date(y,m,1).getDay();var days=new Date(y,m+1,0).getDate();for(var i=0;i<42;i++){a[i]="&nbsp;";}for(var i=0;i<days;i++){a[i+firstDay]=i+1;}if(this.$s.d>days){this.$s.d=days;}return a;},$bindData:function(){var E=this;$jskey.$(E.$k.show).style.display="none";$jskey.$(E.$k.y).innerHTML=E.$fnYear(E.$s.y);if(E.$c.level>=E.$p.y){return;}$jskey.$(E.$k.M).innerHTML=E.$lang.M[E.$c.lang][E.$s.M];$jskey.$(E.$k.H).innerHTML=E.$s.H;$jskey.$(E.$k.m).innerHTML=E.$s.m;$jskey.$(E.$k.s).innerHTML=E.$s.s;var dateArray=E.$fnGetViewArray(parseInt(E.$s.y,10),parseInt(E.$s.M,10));var tds=$jskey.$(E.$k.table).getElementsByTagName("td");for(var i=0;i<tds.length;i++){var z=tds[i];z.onmouseover=function(){return;};z.onmouseout=function(){return;};var v=dateArray[i];z.innerHTML=v;if(v=="&nbsp;"||(E.$s.y<E.$c.min.y)||(E.$s.y>E.$c.max.y)||(E.$s.y<=E.$c.min.y&&E.$s.M<E.$c.min.M)||(E.$s.y>=E.$c.max.y&&E.$s.M>E.$c.max.M)||(E.$s.y<=E.$c.min.y&&E.$s.M<=E.$c.min.M&&v<E.$c.min.d)||(E.$s.y>=E.$c.max.y&&E.$s.M>=E.$c.max.M&&v>E.$c.max.d)){z.className="";z.onclick=function(){return;};}else{z.className=(z.getAttribute("tn")=="tdDay")?"day":"holiday";z.isToday=false;if(E.$p.cy==E.$s.y&&E.$p.cM==E.$s.M&&E.$p.cd==v){z.className="today";z.isToday=true;}if(E.$s.d==v){z.className="sel";E.$selTD=z;}if(E.$c.level==E.$p.d){z.onclick=function(){E.$s.d=this.innerHTML;E.$fnReturn(E.$fnFormat(E.$fnDate(),E.$c.format));};}else{z.onclick=function(){if(E.$selTD !=null){var t="day";if(E.$selTD.isToday){t="today";}else{var s=E.$selTD.getAttribute("tn");if(s=="tdHoliday"){t="holiday";}}E.$selTD.className=t;}this.className="sel";E.$s.d=this.innerHTML;E.$selTD=this;};}z.onmouseover=function(){this.className="over";};z.onmouseout=function(){var t="day";if(E.$selTD !=this){if(this.isToday){t="today";}else{var s=this.getAttribute("tn");if(s=="tdHoliday"){t="holiday";}}}else{t="sel";}this.className=t;};z.onblur=function(){E.$fnBlur();};}}},$fnPoint:function(e){var x=e.offsetLeft;var y=e.offsetTop;while(e=e.offsetParent){x+=e.offsetLeft;y+=e.offsetTop;}var sy=0;try{sy=event.clientY;}catch(ee){sy=0;}var a={"sx":x,"sy":sy,"x":x,"y":y,"w":$jskey.$(this.$k.panel).offsetWidth,"h":$jskey.$(this.$k.panel).offsetHeight};return a;},$fnGetLevel:function(s){var t=this.$p;if(s.indexOf('ss')>-1){return t.s;}else if(s.indexOf('mm')>-1){return t.m;}else if(s.indexOf('HH')>-1){return t.H;}else if(s.indexOf('dd')>-1){return t.d;}else if(s.indexOf('MM')>-1){return t.M;}else if(s.indexOf('yyyy')>-1){return t.y;}return t.d;},$fnIsChange:function(p){var b=false,C=this.$c;if(C.lang !=p.lang||C.level !=p.level||C.format !=p.format){b=true;}C.left=p.left;C.top=p.top;C.min=this.$fnMyDate(p.min);C.max=this.$fnMyDate(p.max);if(b){C.lang=p.lang;C.format=p.format;C.level=p.level;}return b;},showCalendar:function(obj,p){var E=this;var t;E.$fnInit();if(obj==null){throw new Error("error");}if(p.min==null){p.min=E.$p.min;}if(p.max==null){p.max=E.$p.max;}if(p.lang==null){p.lang=0;}if(p.left==null){p.left=0;}if(p.top==null){p.top=0;}if(p.format==null){p.format="yyyy-MM-dd";}p.level=E.$fnGetLevel(p.sample||p.show||"yyyy-MM-dd");t=new Date();try{var f=p.format,v=obj.value;if(v.length>=f.length){var y=1000,M=1,d=1,H=1,m=1,s=1,_iy=f.indexOf('yyyy'),_iM=f.indexOf('MM'),_id=f.indexOf('dd'),_iH=f.indexOf('HH'),_im=f.indexOf('mm'),_is=f.indexOf('ss');if(_iy !=-1){y=parseInt(v.substring(_iy,_iy+4),10);};if(!isNaN(y)&&y>0){if(_iM !=-1){M=v.substring(_iM,_iM+2);if(isNaN(M)){M=t.getMonth()+1;}}if(_id !=-1){d=v.substring(_id,_id+2);if(isNaN(d)){d=t.getDate();}}if(_iH !=-1){H=v.substring(_iH,_iH+2);if(isNaN(H)){H=t.getHours();}}if(_im !=-1){m=v.substring(_im,_im+2);if(isNaN(m)){m=t.getMinutes();}}if(_is !=-1){s=v.substring(_is,_is+2);if(isNaN(s)){s=t.getSeconds();}}eval("t=new Date('"+y+"','"+(M-1)+"','"+d+"','"+H+"','"+m+"','"+s+"')");}}}catch(e){t=new Date();}E.$fnReset(t);E.$fnSkin(p.skin||"default");var isChange=E.$fnIsChange(p);E.$input=obj;if(E.$panel.innerHTML==""||isChange){E.$fnDraw();}E.$bindData();E.$panel.style.display="";E.$div.style.display="";$jskey.$(E.$k.show).style.display="none";t=E.$fnPoint(obj);E.$panel.style.left=(t.x+E.$c.left)+"px";E.$panel.style.top=((E.$c.top==0)?((t.sy>340)?(t.y-t.h):(t.y+obj.offsetHeight)):(t.y+obj.offsetHeight+E.$c.top))+"px";if(!E.$input.isTransEvent){E.$input.isTransEvent=true;if(E.$input.onblur !=null){E.$input.blurEvent=E.$input.onblur;}E.$input.onblur=function(){E.$fnBlur();if(typeof(this.blurEvent)=='function'){this.blurEvent();}};}E.$div.onmouseover=function(){E.$focus=true;};E.$div.onmouseout=function(){E.$focus=false;};},$hide:function(){this.$panel.style.display="none";this.$div.style.display="none";this.$focus=false;},$fnBlur:function(){if(!(this.$focus)){this.$hide();}},show:function(a0,a1){if(a1.object !=null){this.showCalendar(a1.object,a1);return true;}if(a1.id !=null){a1.id=a1.id+"";var obj=$jskey.$(a1.id);if(obj !=null){this.showCalendar(obj,a1);return true;}}if(typeof(a0)=='object'){this.showCalendar(a0,a1);return true;}else if(typeof(a0)=='string'){var obj=$jskey.$(a0);if(obj==null){return false;}this.showCalendar(obj,a1);return true;}return false;}};
$jskey.calendar=new $jskey.Calendar();$jskey.calendar.$fnSkin("default");
