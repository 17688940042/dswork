<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC
	"-//ibatis.apache.org//DTD Mapper 3.0//EN" 
	"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="dswork.common.model.DsCommonFlowTask">

<insert id="insert" parameterType="dswork.common.model.DsCommonFlowTask">
	<selectKey resultType="Long" order="AFTER" keyProperty="id">
		select LAST_INSERT_ID()
	</selectKey>
	insert into DS_FLOW_TASK
	(ID, FLOWID, DEPLOYID, TALIAS, TNAME, TNODEPREV, TNODENEXT, TUSERS, TMEMO)
	values
	(null, #{flowid}, null, #{talias}, #{tname}, #{tnodeprev}, #{tnodenext}, #{tusers}, #{tmemo})
</insert>

<delete id="deleteByFlowid">
	delete from DS_FLOW_TASK where FLOWID=#{flowid}
</delete>

<resultMap id="result" type="dswork.common.model.DsCommonFlowTask">
	<id property="id" column="ID" />
	<result property="flowid" column="FLOWID" />
	<result property="deployid" column="DEPLOYID" />
	<result property="talias" column="TALIAS" />
	<result property="tname" column="TNAME" />
	<result property="tnodeprev" column="TNODEPREV" />
	<result property="tnodenext" column="TNODENEXT" />
	<result property="tusers" column="TUSERS" />
	<result property="tmemo" column="TMEMO" />
</resultMap>

<sql id="columns">
	ID, FLOWID, DEPLOYID, TALIAS, TNAME, TNODEPREV, TNODENEXT,TUSERS, TMEMO
</sql>

<select id="query" resultMap="result">
	select <include refid="columns" /> from DS_FLOW_TASK where FLOWID=#{flowid} order by ID
</select>

</mapper>
